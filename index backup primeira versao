<!doctype html>
<html lang="pt-BR" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rolling Stone - Charted</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&amp;family=Source+Serif+4:ital,wght@0,300;0,400;0,600;0,700;1,400&amp;family=Bebas+Neue&amp;family=DM+Sans:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }

    :root {
      --bg: #0a0a0a;
      --surface: #1a1a1a;
      --text: #f0e6d3;
      --accent: #dc2626;
      --secondary: #8b7355;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    .font-display { font-family: 'Playfair Display', Georgia, serif; }
    .font-body { font-family: 'Source Serif 4', Georgia, serif; }
    .font-bebas { font-family: 'Bebas Neue', Impact, sans-serif; }
    .font-sans { font-family: 'DM Sans', Helvetica, sans-serif; }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-40px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 20px rgba(220, 38, 38, 0.3); }
      50% { box-shadow: 0 0 40px rgba(220, 38, 38, 0.6); }
    }

    @keyframes marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    .anim-fade { animation: fadeInUp 0.8s ease-out both; }
    .anim-slide { animation: slideInLeft 0.7s ease-out both; }
    .anim-scale { animation: scaleIn 0.6s ease-out both; }

    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.2s; }
    .delay-3 { animation-delay: 0.3s; }
    .delay-4 { animation-delay: 0.4s; }
    .delay-5 { animation-delay: 0.5s; }
    .delay-6 { animation-delay: 0.6s; }
    .delay-7 { animation-delay: 0.7s; }

    .magazine-wrapper {
      background: var(--bg);
      color: var(--text);
      width: 100%;
      min-height: 100%;
      overflow-x: hidden;
    }

    .red-line {
      height: 4px;
      background: var(--accent);
      width: 100%;
    }

    .cover-section {
      position: relative;
      width: 100%;
      padding: 0;
      overflow: hidden;
    }

    .cover-bg {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at 30% 20%, rgba(220, 38, 38, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 70% 80%, rgba(139, 115, 85, 0.1) 0%, transparent 50%),
        linear-gradient(180deg, #0a0a0a 0%, #111 50%, #0a0a0a 100%);
    }

    .cover-pattern {
      position: absolute;
      inset: 0;
      opacity: 0.03;
      background-image:
        repeating-linear-gradient(0deg, transparent, transparent 49px, rgba(240,230,211,0.5) 49px, rgba(240,230,211,0.5) 50px),
        repeating-linear-gradient(90deg, transparent, transparent 49px, rgba(240,230,211,0.5) 49px, rgba(240,230,211,0.5) 50px);
    }

    .masthead {
      position: relative;
      z-index: 2;
      padding: 2rem 2rem 0;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .logo-text {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: clamp(2.5rem, 6vw, 5rem);
      letter-spacing: 0.15em;
      line-height: 0.9;
      color: var(--accent);
      text-transform: uppercase;
    }

    .issue-badge {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--secondary);
      border: 1px solid var(--secondary);
      padding: 0.4rem 0.8rem;
      display: inline-block;
    }

    .cover-content {
      position: relative;
      z-index: 2;
      padding: 4rem 2rem 5rem;
      max-width: 900px;
    }

    .cover-headline {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: clamp(3rem, 8vw, 7rem);
      font-weight: 900;
      line-height: 0.95;
      letter-spacing: -0.02em;
      margin-bottom: 1.5rem;
    }

    .cover-headline .accent-word {
      color: var(--accent);
      font-style: italic;
    }

    .cover-sub {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: clamp(1rem, 2vw, 1.4rem);
      font-weight: 300;
      color: var(--secondary);
      max-width: 500px;
      line-height: 1.6;
    }

    .divider-section {
      padding: 0 2rem;
      overflow: hidden;
    }

    .marquee-track {
      display: flex;
      width: max-content;
      animation: marquee 20s linear infinite;
    }

    .marquee-text {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: clamp(1rem, 2vw, 1.5rem);
      letter-spacing: 0.3em;
      color: var(--secondary);
      opacity: 0.4;
      white-space: nowrap;
      padding-right: 3rem;
    }

    .section-label {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: 0.75rem;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .section-label::before {
      content: '';
      width: 30px;
      height: 2px;
      background: var(--accent);
    }

    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .chart-card {
      background: var(--surface);
      border: 1px solid rgba(240, 230, 211, 0.06);
      padding: 1.5rem;
      position: relative;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .chart-card:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .chart-card:hover .chart-rank {
      color: var(--accent);
    }

    .chart-rank {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: 3rem;
      line-height: 1;
      color: rgba(240, 230, 211, 0.1);
      transition: color 0.3s ease;
    }

    .chart-title {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.2rem;
      font-weight: 700;
      margin: 0.5rem 0 0.25rem;
    }

    .chart-artist {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.8rem;
      color: var(--secondary);
      letter-spacing: 0.05em;
    }

    .chart-bar {
      margin-top: 1rem;
      height: 3px;
      background: rgba(240, 230, 211, 0.06);
      border-radius: 2px;
      overflow: hidden;
    }

    .chart-bar-fill {
      height: 100%;
      background: var(--accent);
      border-radius: 2px;
      transition: width 1s ease;
    }

    .feature-section {
      padding: 4rem 2rem;
    }

    .feature-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: start;
    }

    @media (max-width: 768px) {
      .feature-layout {
        grid-template-columns: 1fr;
      }
    }

    .feature-image-area {
      aspect-ratio: 3/4;
      background: var(--surface);
      position: relative;
      overflow: hidden;
    }

    .feature-image-bg {
      position: absolute;
      inset: 0;
      background:
        linear-gradient(135deg, var(--accent) 0%, transparent 60%),
        linear-gradient(225deg, var(--secondary) 0%, transparent 60%),
        var(--surface);
      opacity: 0.6;
    }

    .feature-image-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 2rem;
      background: linear-gradient(to top, rgba(10,10,10,0.9) 0%, transparent 60%);
    }

    .feature-image-text {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: clamp(4rem, 10vw, 8rem);
      line-height: 0.85;
      color: var(--text);
      opacity: 0.15;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-5deg);
      white-space: nowrap;
    }

    .feature-text-area {
      padding-top: 1rem;
    }

    .feature-title {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: 900;
      line-height: 1.05;
      margin-bottom: 1.5rem;
    }

    .feature-body {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 1.05rem;
      line-height: 1.8;
      color: var(--secondary);
    }

    .drop-cap::first-letter {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 4rem;
      float: left;
      line-height: 0.8;
      padding-right: 0.5rem;
      color: var(--accent);
      font-weight: 900;
    }

    .pull-quote {
      border-left: 3px solid var(--accent);
      padding: 1.5rem 0 1.5rem 1.5rem;
      margin: 2rem 0;
    }

    .pull-quote-text {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.4rem;
      font-style: italic;
      line-height: 1.5;
      color: var(--text);
    }

    .editorial-section {
      padding: 3rem 2rem 4rem;
      border-top: 1px solid rgba(240, 230, 211, 0.06);
    }

    .editorial-box {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
    }

    .editorial-title {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: 0.75rem;
      letter-spacing: 0.3em;
      color: var(--accent);
      margin-bottom: 1.5rem;
    }

    .editorial-text {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 1rem;
      font-style: italic;
      line-height: 1.8;
      color: var(--secondary);
    }

    .footer-section {
      padding: 2rem;
      border-top: 1px solid rgba(240, 230, 211, 0.06);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .footer-logo {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: 1.2rem;
      letter-spacing: 0.15em;
      color: var(--accent);
    }

    .footer-links {
      display: flex;
      gap: 1.5rem;
    }

    .footer-link {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.7rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--secondary);
      text-decoration: none;
      transition: color 0.3s ease;
      cursor: pointer;
    }

    .footer-link:hover { color: var(--text); }

    /* Page navigation tabs */
    .page-nav {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(240, 230, 211, 0.06);
      padding: 0 2rem;
      display: flex;
      gap: 0;
      overflow-x: auto;
    }

    .page-tab {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.7rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--secondary);
      padding: 1rem 1.5rem;
      cursor: pointer;
      border: none;
      background: none;
      position: relative;
      transition: color 0.3s ease;
      white-space: nowrap;
    }

    .page-tab:hover { color: var(--text); }

    .page-tab.active {
      color: var(--text);
    }

    .page-tab.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 1.5rem;
      right: 1.5rem;
      height: 2px;
      background: var(--accent);
    }

    .page-content { display: none; }
    .page-content.active { display: block; }

    /* Hot 100 list styles */
    .hot-list { list-style: none; padding: 0; }

    .hot-item {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(240, 230, 211, 0.04);
      transition: background 0.2s ease;
    }

    .hot-item:hover {
      background: rgba(240, 230, 211, 0.02);
      padding-left: 0.5rem;
    }

    .hot-number {
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: 1.8rem;
      color: rgba(240, 230, 211, 0.1);
      min-width: 3rem;
      text-align: right;
      transition: color 0.3s ease;
    }

    .hot-item:hover .hot-number { color: var(--accent); }

    .hot-vinyl {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, #222, #333, #222, #333, #222);
      position: relative;
      flex-shrink: 0;
    }

    .hot-vinyl::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--accent);
      transform: translate(-50%, -50%);
    }

    .hot-info { flex: 1; }

    .hot-song {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1rem;
      font-weight: 700;
    }

    .hot-artist-name {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.8rem;
      color: var(--secondary);
    }

    .hot-weeks {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.65rem;
      letter-spacing: 0.1em;
      color: var(--secondary);
      text-align: right;
      min-width: 60px;
    }

    .trend-up { color: #22c55e; }
    .trend-down { color: var(--accent); }

    /* Review section */
    .review-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .review-card {
      background: var(--surface);
      border: 1px solid rgba(240, 230, 211, 0.06);
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .review-card:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
    }

    .review-album-art {
      aspect-ratio: 1;
      position: relative;
      overflow: hidden;
    }

    .review-album-bg {
      position: absolute;
      inset: 0;
    }

    .review-rating {
      position: absolute;
      bottom: 0.75rem;
      right: 0.75rem;
      background: var(--accent);
      color: white;
      font-family: 'Bebas Neue', Impact, sans-serif;
      font-size: 1.2rem;
      width: 2.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: glowPulse 3s ease-in-out infinite;
    }

    .review-info {
      padding: 1.25rem;
    }

    .review-album-title {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .review-album-artist {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.75rem;
      color: var(--secondary);
      margin-bottom: 0.75rem;
    }

    .review-excerpt {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 0.85rem;
      line-height: 1.6;
      color: var(--secondary);
    }

    .stars {
      color: var(--accent);
      letter-spacing: 2px;
      font-size: 0.8rem;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div class="magazine-wrapper" id="magazine"><!-- Red top line -->
   <div class="red-line"></div><!-- Navigation Tabs -->
   <nav class="page-nav" role="navigation" aria-label="Magazine sections"><button class="page-tab active" data-page="cover" aria-current="page">Capa</button> <button class="page-tab" data-page="charts">Charts</button> <button class="page-tab" data-page="feature">Matéria</button> <button class="page-tab" data-page="reviews">Reviews</button>
   </nav><!-- ═══════════════════ COVER PAGE ═══════════════════ -->
   <main>
    <section class="page-content active" id="page-cover">
     <div class="cover-section" style="min-height:90%;">
      <div class="cover-bg"></div>
      <div class="cover-pattern"></div>
      <header class="masthead anim-fade delay-1">
       <div>
        <div class="logo-text" id="el-magazine-title">
         Rolling Stone
        </div>
       </div>
       <div class="issue-badge" id="el-issue-info">
        Issue #1247 • March 2025
       </div>
      </header>
      <div class="cover-content">
       <h1 class="cover-headline anim-fade delay-3" id="el-cover-headline">The <span class="accent-word">Sound</span> Revolution</h1>
       <p class="cover-sub anim-fade delay-5" id="el-cover-sub">How Charted is Changing Music Forever</p>
      </div>
     </div><!-- Ticker -->
     <div class="divider-section" style="padding-top:1rem;padding-bottom:1rem;">
      <div class="marquee-track"><span class="marquee-text">★ CHARTED ★ ROLLING STONE ★ MUSIC ★ CULTURE ★ THE CHARTS ★ NEW WAVE ★ CHARTED ★ ROLLING STONE ★ MUSIC ★ CULTURE ★ THE CHARTS ★ NEW WAVE ★&nbsp;</span> <span class="marquee-text">★ CHARTED ★ ROLLING STONE ★ MUSIC ★ CULTURE ★ THE CHARTS ★ NEW WAVE ★ CHARTED ★ ROLLING STONE ★ MUSIC ★ CULTURE ★ THE CHARTS ★ NEW WAVE ★&nbsp;</span>
      </div>
     </div><!-- Top 5 Preview -->
     <section class="feature-section" aria-labelledby="top5-label">
      <div class="section-label anim-slide delay-2" id="top5-label">
       Top 5 This Week
      </div>
      <div class="chart-grid">
       <div class="chart-card anim-scale delay-3">
        <div class="chart-rank">
         01
        </div>
        <div class="chart-title">
         Midnight Signal
        </div>
        <div class="chart-artist">
         Nova Eclipse
        </div>
        <div class="chart-bar">
         <div class="chart-bar-fill" style="width:95%"></div>
        </div>
       </div>
       <div class="chart-card anim-scale delay-4">
        <div class="chart-rank">
         02
        </div>
        <div class="chart-title">
         Velvet Horizon
        </div>
        <div class="chart-artist">
         The Wanderers
        </div>
        <div class="chart-bar">
         <div class="chart-bar-fill" style="width:88%"></div>
        </div>
       </div>
       <div class="chart-card anim-scale delay-5">
        <div class="chart-rank">
         03
        </div>
        <div class="chart-title">
         Chrome Heart
        </div>
        <div class="chart-artist">
         Siren Valley
        </div>
        <div class="chart-bar">
         <div class="chart-bar-fill" style="width:82%"></div>
        </div>
       </div>
       <div class="chart-card anim-scale delay-6">
        <div class="chart-rank">
         04
        </div>
        <div class="chart-title">
         Neon Cathedral
        </div>
        <div class="chart-artist">
         Glass Animals
        </div>
        <div class="chart-bar">
         <div class="chart-bar-fill" style="width:76%"></div>
        </div>
       </div>
       <div class="chart-card anim-scale delay-7">
        <div class="chart-rank">
         05
        </div>
        <div class="chart-title">
         Gravity Well
        </div>
        <div class="chart-artist">
         Phantom Drift
        </div>
        <div class="chart-bar">
         <div class="chart-bar-fill" style="width:71%"></div>
        </div>
       </div>
      </div>
     </section><!-- Editorial Note -->
     <section class="editorial-section" aria-labelledby="editorial-title">
      <div class="editorial-box anim-fade delay-4">
       <div class="editorial-title" id="editorial-title">
        Nota do Editor
       </div>
       <p class="editorial-text" id="el-editorial-note">Welcome to a new era of music journalism. In Charted, every note counts, every chart position tells a story, and we at Rolling Stone are here to document every beat of this revolution.</p>
      </div>
     </section>
    </section><!-- ═══════════════════ CHARTS PAGE ═══════════════════ -->
    <section class="page-content" id="page-charts">
     <div class="feature-section">
      <div class="section-label">
       The Hot 100
      </div>
      <h2 class="font-display" style="font-size:clamp(2rem,4vw,3rem);font-weight:900;margin-bottom:2rem;">This Week's Chart</h2>
      <ol class="hot-list" id="hot-list"></ol>
     </div>
    </section><!-- ═══════════════════ FEATURE PAGE ═══════════════════ -->
    <section class="page-content" id="page-feature">
     <div class="feature-section">
      <div class="feature-layout">
       <div class="feature-image-area">
        <div class="feature-image-bg"></div>
        <div class="feature-image-text">
         CHARTED
        </div>
        <div class="feature-image-overlay">
         <div class="section-label" style="color:white;">
          Exclusive Feature
         </div>
        </div>
       </div>
       <div class="feature-text-area">
        <div class="section-label">
         Cover Story
        </div>
        <h2 class="feature-title" id="el-feature-title">Inside the Charts</h2>
        <div class="feature-body drop-cap" id="el-feature-body">
         The definitive guide to climbing the charts in the most competitive music landscape ever created. From bedroom producers to stadium headliners, Charted has rewritten the rules of how we discover, consume, and celebrate music.
        </div>
        <div class="pull-quote">
         <p class="pull-quote-text">"Charted didn't just change the game — it built an entirely new arena."</p>
         <p class="font-sans" style="font-size:0.75rem;color:var(--secondary);margin-top:0.75rem;letter-spacing:0.1em;">— THE EDITORS, ROLLING STONE</p>
        </div>
        <p class="feature-body" style="margin-top:1rem;">The phenomenon has attracted millions of players worldwide, each vying for chart supremacy in a world where taste, timing, and strategy converge. Industry veterans call it the most significant shift in music culture since streaming.</p>
       </div>
      </div>
     </div>
    </section><!-- ═══════════════════ REVIEWS PAGE ═══════════════════ -->
    <section class="page-content" id="page-reviews">
     <div class="feature-section">
      <div class="section-label">
       Album Reviews
      </div>
      <h2 class="font-display" style="font-size:clamp(2rem,4vw,3rem);font-weight:900;margin-bottom:2rem;">Critic's Corner</h2>
      <div class="review-grid" id="review-grid"></div>
     </div>
    </section>
   </main><!-- Footer -->
   <footer class="footer-section">
    <div class="footer-logo">
     Rolling Stone × Charted
    </div>
    <div class="footer-links"><span class="footer-link">Charts</span> <span class="footer-link">Reviews</span> <span class="footer-link">Culture</span> <span class="footer-link">Subscribe</span>
    </div>
   </footer>
   <div class="red-line"></div>
  </div>
  <script>
  // ─── Default Config ─────────────────────────────────
  const defaultConfig = {
    magazine_title: 'Rolling Stone',
    issue_info: 'Issue #1247 • March 2025',
    cover_headline: 'The Sound Revolution',
    cover_subheadline: 'How Charted is Changing Music Forever',
    feature_title: 'Inside the Charts',
    feature_body: 'The definitive guide to climbing the charts in the most competitive music landscape ever created. From bedroom producers to stadium headliners, Charted has rewritten the rules of how we discover, consume, and celebrate music.',
    editorial_note: 'Welcome to a new era of music journalism. In Charted, every note counts, every chart position tells a story, and we at Rolling Stone are here to document every beat of this revolution.',
    background_color: '#0a0a0a',
    surface_color: '#1a1a1a',
    text_color: '#f0e6d3',
    accent_color: '#dc2626',
    secondary_color: '#8b7355',
    font_family: 'Playfair Display',
    font_size: 16
  };

  // ─── Chart Data ─────────────────────────────────
  const hotData = [
    { rank: 1, song: 'Midnight Signal', artist: 'Nova Eclipse', weeks: 12, trend: 'up' },
    { rank: 2, song: 'Velvet Horizon', artist: 'The Wanderers', weeks: 8, trend: 'up' },
    { rank: 3, song: 'Chrome Heart', artist: 'Siren Valley', weeks: 15, trend: 'down' },
    { rank: 4, song: 'Neon Cathedral', artist: 'Glass Animals', weeks: 6, trend: 'up' },
    { rank: 5, song: 'Gravity Well', artist: 'Phantom Drift', weeks: 3, trend: 'up' },
    { rank: 6, song: 'Solar Flare', artist: 'Dusk Parade', weeks: 10, trend: 'down' },
    { rank: 7, song: 'Hollow Ground', artist: 'Ember Coast', weeks: 7, trend: 'up' },
    { rank: 8, song: 'Prism Rain', artist: 'Aurora Keys', weeks: 5, trend: 'up' },
    { rank: 9, song: 'Fault Lines', artist: 'Crimson Tide', weeks: 9, trend: 'down' },
    { rank: 10, song: 'Stardust', artist: 'Lunar Phase', weeks: 2, trend: 'up' },
  ];

  const reviewData = [
    {
      album: 'Infinite Loop',
      artist: 'Nova Eclipse',
      rating: 9.2,
      stars: '★★★★★',
      color: 'linear-gradient(135deg, #dc2626, #7c1d1d)',
      excerpt: 'A masterpiece of modern sound design that pushes every boundary.'
    },
    {
      album: 'Tidal Memories',
      artist: 'The Wanderers',
      rating: 8.7,
      stars: '★★★★½',
      color: 'linear-gradient(135deg, #1e40af, #0f172a)',
      excerpt: 'Lush, expansive, and deeply emotional — their finest work yet.'
    },
    {
      album: 'Glass Empire',
      artist: 'Siren Valley',
      rating: 7.9,
      stars: '★★★★',
      color: 'linear-gradient(135deg, #8b7355, #3d2e1a)',
      excerpt: 'Bold experimentation meets anthemic hooks in this genre-defying record.'
    },
    {
      album: 'Electric Saints',
      artist: 'Phantom Drift',
      rating: 8.4,
      stars: '★★★★½',
      color: 'linear-gradient(135deg, #6d28d9, #1e1b4b)',
      excerpt: 'A sonic cathedral that rewards with every listen.'
    }
  ];

  // ─── Build Hot List ────────────────────────────────
  function buildHotList() {
    const list = document.getElementById('hot-list');
    list.innerHTML = '';
    hotData.forEach(item => {
      const li = document.createElement('li');
      li.className = 'hot-item';
      li.innerHTML = `
        <span class="hot-number">${String(item.rank).padStart(2, '0')}</span>
        <div class="hot-vinyl"></div>
        <div class="hot-info">
          <div class="hot-song">${item.song}</div>
          <div class="hot-artist-name">${item.artist}</div>
        </div>
        <div class="hot-weeks">
          <span class="${item.trend === 'up' ? 'trend-up' : 'trend-down'}">${item.trend === 'up' ? '▲' : '▼'}</span>
          ${item.weeks} wks
        </div>
      `;
      list.appendChild(li);
    });
  }

  // ─── Build Reviews ────────────────────────────────
  function buildReviews() {
    const grid = document.getElementById('review-grid');
    grid.innerHTML = '';
    reviewData.forEach(r => {
      const card = document.createElement('div');
      card.className = 'review-card';
      card.innerHTML = `
        <div class="review-album-art">
          <div class="review-album-bg" style="background:${r.color}"></div>
          <div class="review-rating">${r.rating}</div>
        </div>
        <div class="review-info">
          <div class="stars">${r.stars}</div>
          <div class="review-album-title">${r.album}</div>
          <div class="review-album-artist">${r.artist}</div>
          <p class="review-excerpt">${r.excerpt}</p>
        </div>
      `;
      grid.appendChild(card);
    });
  }

  // ─── Tab Navigation ────────────────────────────────
  document.querySelectorAll('.page-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.page-tab').forEach(t => {
        t.classList.remove('active');
        t.removeAttribute('aria-current');
      });
      tab.classList.add('active');
      tab.setAttribute('aria-current', 'page');

      document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
      const target = document.getElementById('page-' + tab.dataset.page);
      if (target) target.classList.add('active');
    });
  });

  // ─── Apply Colors to CSS Variables ────────────────
  function applyColors(config) {
    const root = document.documentElement;
    root.style.setProperty('--bg', config.background_color || defaultConfig.background_color);
    root.style.setProperty('--surface', config.surface_color || defaultConfig.surface_color);
    root.style.setProperty('--text', config.text_color || defaultConfig.text_color);
    root.style.setProperty('--accent', config.accent_color || defaultConfig.accent_color);
    root.style.setProperty('--secondary', config.secondary_color || defaultConfig.secondary_color);

    // Direct DOM updates for elements using these colors
    const wrapper = document.getElementById('magazine');
    if (wrapper) {
      wrapper.style.background = config.background_color || defaultConfig.background_color;
      wrapper.style.color = config.text_color || defaultConfig.text_color;
    }

    // Red lines
    document.querySelectorAll('.red-line').forEach(el => {
      el.style.background = config.accent_color || defaultConfig.accent_color;
    });

    // Logo
    const logo = document.getElementById('el-magazine-title');
    if (logo) logo.style.color = config.accent_color || defaultConfig.accent_color;

    // Issue badge
    const badge = document.getElementById('el-issue-info');
    if (badge) {
      badge.style.color = config.secondary_color || defaultConfig.secondary_color;
      badge.style.borderColor = config.secondary_color || defaultConfig.secondary_color;
    }

    // Section labels
    document.querySelectorAll('.section-label').forEach(el => {
      el.style.color = config.accent_color || defaultConfig.accent_color;
    });

    // Chart cards
    document.querySelectorAll('.chart-card').forEach(el => {
      el.style.background = config.surface_color || defaultConfig.surface_color;
    });

    // Cover sub
    const coverSub = document.getElementById('el-cover-sub');
    if (coverSub) coverSub.style.color = config.secondary_color || defaultConfig.secondary_color;

    // Editorial
    const editorialTitle = document.getElementById('editorial-title');
    if (editorialTitle) editorialTitle.style.color = config.accent_color || defaultConfig.accent_color;
    const editorialNote = document.getElementById('el-editorial-note');
    if (editorialNote) editorialNote.style.color = config.secondary_color || defaultConfig.secondary_color;

    // Accent word in headline
    document.querySelectorAll('.accent-word').forEach(el => {
      el.style.color = config.accent_color || defaultConfig.accent_color;
    });

    // Footer logo
    const footerLogo = document.querySelector('.footer-logo');
    if (footerLogo) footerLogo.style.color = config.accent_color || defaultConfig.accent_color;

    // Nav background
    const nav = document.querySelector('.page-nav');
    if (nav) nav.style.background = `${config.background_color || defaultConfig.background_color}ee`;

    // Tabs
    document.querySelectorAll('.page-tab').forEach(el => {
      el.style.color = el.classList.contains('active')
        ? (config.text_color || defaultConfig.text_color)
        : (config.secondary_color || defaultConfig.secondary_color);
    });
  }

  // ─── Apply Fonts ──────────────────────────────────
  function applyFonts(config) {
    const customFont = config.font_family || defaultConfig.font_family;
    const baseSize = config.font_size || defaultConfig.font_size;

    // Primary text — headings, cover, feature
    document.querySelectorAll('.cover-headline, .feature-title, .chart-title, .hot-song, .review-album-title, .pull-quote-text').forEach(el => {
      el.style.fontFamily = `${customFont}, 'Playfair Display', Georgia, serif`;
    });

    // Font size scaling
    const coverHL = document.querySelector('.cover-headline');
    if (coverHL) coverHL.style.fontSize = `clamp(${baseSize * 1.8}px, 8vw, ${baseSize * 4.5}px)`;

    const featureTitle = document.getElementById('el-feature-title');
    if (featureTitle) featureTitle.style.fontSize = `clamp(${baseSize * 1.25}px, 4vw, ${baseSize * 1.9}px)`;

    document.querySelectorAll('.feature-body, .editorial-text, .review-excerpt').forEach(el => {
      el.style.fontSize = `${baseSize}px`;
    });

    document.querySelectorAll('.chart-artist, .hot-artist-name, .review-album-artist').forEach(el => {
      el.style.fontSize = `${baseSize * 0.8}px`;
    });
  }

  // ─── Apply Text Content ───────────────────────────
  function applyText(config) {
    const titleEl = document.getElementById('el-magazine-title');
    if (titleEl) titleEl.textContent = config.magazine_title || defaultConfig.magazine_title;

    const issueEl = document.getElementById('el-issue-info');
    if (issueEl) issueEl.textContent = config.issue_info || defaultConfig.issue_info;

    // Cover headline with accent styling
    const headlineEl = document.getElementById('el-cover-headline');
    if (headlineEl) {
      const headline = config.cover_headline || defaultConfig.cover_headline;
      const words = headline.split(' ');
      if (words.length > 1) {
        const mid = Math.floor(words.length / 2);
        headlineEl.innerHTML = words.map((w, i) =>
          i === mid ? `<span class="accent-word" style="color:${config.accent_color || defaultConfig.accent_color}">${w}</span>` : w
        ).join(' ');
      } else {
        headlineEl.textContent = headline;
      }
    }

    const subEl = document.getElementById('el-cover-sub');
    if (subEl) subEl.textContent = config.cover_subheadline || defaultConfig.cover_subheadline;

    const featTitle = document.getElementById('el-feature-title');
    if (featTitle) featTitle.textContent = config.feature_title || defaultConfig.feature_title;

    const featBody = document.getElementById('el-feature-body');
    if (featBody) featBody.textContent = config.feature_body || defaultConfig.feature_body;

    const editNote = document.getElementById('el-editorial-note');
    if (editNote) editNote.textContent = config.editorial_note || defaultConfig.editorial_note;
  }

  // ─── Element SDK ──────────────────────────────────
  if (window.elementSdk) {
    window.elementSdk.init({
      defaultConfig,

      onConfigChange: async (config) => {
        applyColors(config);
        applyFonts(config);
        applyText(config);
      },

      mapToCapabilities: (config) => ({
        recolorables: [
          { // Background
            get: () => config.background_color || defaultConfig.background_color,
            set: (v) => { config.background_color = v; window.elementSdk.setConfig({ background_color: v }); }
          },
          { // Surface
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (v) => { config.surface_color = v; window.elementSdk.setConfig({ surface_color: v }); }
          },
          { // Text
            get: () => config.text_color || defaultConfig.text_color,
            set: (v) => { config.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
          },
          { // Accent (primary action)
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (v) => { config.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); }
          },
          { // Secondary
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (v) => { config.secondary_color = v; window.elementSdk.setConfig({ secondary_color: v }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (v) => { config.font_family = v; window.elementSdk.setConfig({ font_family: v }); }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (v) => { config.font_size = v; window.elementSdk.setConfig({ font_size: v }); }
        }
      }),

      mapToEditPanelValues: (config) => new Map([
        ['magazine_title', config.magazine_title || defaultConfig.magazine_title],
        ['issue_info', config.issue_info || defaultConfig.issue_info],
        ['cover_headline', config.cover_headline || defaultConfig.cover_headline],
        ['cover_subheadline', config.cover_subheadline || defaultConfig.cover_subheadline],
        ['feature_title', config.feature_title || defaultConfig.feature_title],
        ['feature_body', config.feature_body || defaultConfig.feature_body],
        ['editorial_note', config.editorial_note || defaultConfig.editorial_note]
      ])
    });
  }

  // ─── Init ─────────────────────────────────────────
  buildHotList();
  buildReviews();
</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cd26c70203a27e7',t:'MTc3MDk2NTc2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>